<!DOCTYPE HTML>
<html>
    <head>
    <meta charset="UTF-8">
    <title>Лабораторна робота №2, Ведмидь Святослав, ПК-15-1</title>
    <style>
    h1,h2,h3 {text-align:center}
    xmp {color:darkblue}
    p {text-align:justify}
    </style>
    </head>
    <body>
    <h2>Лабораторная работа №2. Программирование в Shell. Программа dialog.</h1>
    <h3>Задание лабораторной работы</h3>
        <p> Написать скрипт, который в качестве первого параметра принимает имя директории,
        из которой будут запускаться файлы. Если в указанной директории есть исполняемый файл
        с именем index, то необходимо запустить его на выполнение. В противном случае,
        если в директории существует файл index.htm, то открыть его с помощью программы bareview.
        Если файла index.htm в директории нет, но существует файл index.html,
        то открыть его с помощью gtkmoz. Если же ни один из указанных файлов не обнаружен,
        создать диалоговое окно, в котором спросить, какой файл необходимо выполнить.
        Скрипт должен корректно выполняться как в графическом режиме, так и без него. </p>

    <h3>Код</h3>
    <code>
        <xmp>
            #!/bin/bash
            if [ -z "$1" ]; then
                echo "Не введен путь к папке"
            else
                if [ -f "$1/index.html" ]; then
                    firefox $1/index.html
                elif [ -f "$1/index.htm" ]; then
                    geany $1/index.htm
                elif [ -x "$1/index" ]; then
                    "$1/index"
                else
                    DIALOG=${DIALOG=dialog}
                    FILE=`$DIALOG --stdout --title "Выберите файл для исполнения" --fselect $HOME/ 10 60`
                    case $? in
                        0)
                            if [ -x "$FILE" ]; then
                               "$FILE"
                            else
                                echo "Файл не является исполнимым"
                            fi
                            ;;
                        1)
                            echo "Вы нажали кнопку Cancel.."
                            ;;
                        255)
                            echo "Вы нажали клавишу ESC.."
                            ;;
                    esac
                fi
            fi
            exit 0
        </xmp>
    </code>
    <h3>Пояснения</h3>
    <p>
    Ключи:
    <ul>
        <li><code>-f</code> - истинно если файл существует и является обычным файлом.</li>
        <li><code>-x</code> - истинно если файл существует и является исполняемым.</li>
        <li><code>-z</code> - истинно если строка имеет нулевую длину.</li>
    </ul>
    При совпадении с index.html, index.htm, index,
    выполняется соответствующее действие. Т.к. bareview и gtkmoz не были найдены
    в моем дистрибутиве, использовались программы geany и firefox. Если один из файлов
    не был найден, то вызывается диалог (Xdialog не был найден для данного дистрибутива).
    После присваивания переменной <code>DIALOG</code> значения <code>dialog</code>,
    формируется диалоговое окно <code>fselect</code>. Опция <code>--stdout</code> перенаправляет данные на стандартный вывод.
    <code>--title</code> - название диалога. После выбора файла, он проверяется
    на выполнимость, иначе выводится соответствующее сообщение.
   </p>    </body>
    </html>